<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../layout/customerTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="top">
        top
    </ui:define>

    <ui:define name="content">
        <f:metadata>
            <f:event type="preRenderView" listener="#{customerManagedBean.loadSelectedCustomer}" />
        </f:metadata>
        <h:form id="form">
            <p:growl id="growl" showDetail="true" sticky="true" />
            <p:panelGrid columns="2">
                <h:outputLabel value="Category:"/>
                <h:selectOneMenu value="#{postManagedBean.category}">
                    <f:selectItem itemValue="news" itemLabel="News" />
                    <f:selectItem itemValue="stories" itemLabel="Story" />
                </h:selectOneMenu>
                <h:outputLabel for="title" value="Title:"/>
                <p:inputText id="title" value="#{postManagedBean.title}" 
                             required="true"
                             requiredMessage="Title is required"/>

                <h:outputLabel value="Description:" />
                <p:inputTextarea value="#{postManagedBean.description}" rows="5" 
                                 required="true"
                                 requiredMessage="Description is required"/>
                <p:commandButton value="Add Photo" action="#{postManagedBean.addPost(customerManagedBean.selectedCustomer)}" 
                                 />
                <p:commandButton value="Submit" action="#{postManagedBean.addPost(customerManagedBean.selectedCustomer)}" 
                                 update="form"/>
            </p:panelGrid>
        </h:form>

    </ui:define>

</ui:composition>
